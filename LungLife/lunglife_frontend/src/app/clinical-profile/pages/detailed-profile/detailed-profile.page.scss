/**
 * Detailed Clinical Profile Page Styles
 * Matching role-selection design pattern
 */

// Import shared auth styles for .welcome-container and .action-section
@import '../../../auth/auth.styles.scss';

// Risk Level Colors
$risk-low: #34c759;
$risk-moderate: #ff9500;
$risk-high: #ff6b35;
$risk-critical: #ff3b30;

.clinical-profile-section {
  max-width: 420px;
  min-height: 85vh;
  padding: 24px 32px 40px;
  display: flex;
  flex-direction: column;
}

// Back Navigation
.back-nav {
  margin-bottom: 8px;
  margin-left: -12px;
  
  .back-btn {
    --color: var(--text-light);
    font-size: 14px;
    font-weight: 500;
    
    ion-icon {
      font-size: 18px;
      margin-right: 4px;
    }
  }
}

// Logo Container
.logo-container {
  display: flex;
  justify-content: center;
  margin-bottom: 24px;
  
  .logo-img {
    width: 200px;
    height: auto;
    object-fit: contain;
  }
}

.clinical-profile-section .auth-header {
  margin-bottom: 24px;
  
  h1 {
    font-size: 24px;
    font-weight: 700;
    line-height: 1.3;
    margin-bottom: 8px;
    color: var(--text);
  }
  
  p {
    font-size: 15px;
    color: var(--text-light);
    margin: 0;
  }
}

// Loading State
.loading-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 48px 0;
  gap: 16px;
  
  ion-spinner {
    width: 40px;
    height: 40px;
  }
  
  p {
    font-size: 15px;
    color: var(--text-light);
  }
}

// Error State
.error-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  padding: 32px 0;
  
  .error-icon-wrapper {
    width: 64px;
    height: 64px;
    border-radius: 50%;
    background: rgba(255, 59, 48, 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 16px;
    
    ion-icon {
      font-size: 32px;
      color: #ff3b30;
    }
  }
  
  h3 {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 8px;
    color: var(--text);
  }
  
  p {
    font-size: 14px;
    color: var(--text-light);
    margin-bottom: 24px;
  }
}

// Profile Cards (matching role-card style)
.profile-card {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 16px 20px;
  background: var(--surface);
  border: 2px solid var(--border, #e5e7eb);
  border-radius: 16px;
  margin-bottom: 12px;
  transition: all 0.2s ease;
  width: 100%;
  box-sizing: border-box;
  
  &:hover {
    border-color: var(--primary, #007aff);
    background: rgba(0, 122, 255, 0.02);
  }
}

// Card Icon (matching role-icon style)
.card-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  height: 48px;
  min-width: 48px;
  background: rgba(0, 122, 255, 0.1);
  border-radius: 12px;
  transition: all 0.2s ease;
  position: relative;
  
  ion-icon {
    font-size: 24px;
    color: var(--primary, #007aff);
  }
  
  // Severity colors for risk factors
  &.severity-low {
    background: rgba($risk-low, 0.1);
    ion-icon { color: $risk-low; }
  }
  
  &.severity-moderate {
    background: rgba($risk-moderate, 0.1);
    ion-icon { color: $risk-moderate; }
  }
  
  &.severity-high {
    background: rgba($risk-high, 0.1);
    ion-icon { color: $risk-high; }
  }
}

// Patient avatar with status dot
.patient-avatar {
  .status-dot {
    position: absolute;
    bottom: 2px;
    right: 2px;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    border: 2px solid var(--surface);
    
    &.risk-low { background: $risk-low; }
    &.risk-moderate { background: $risk-moderate; }
    &.risk-high { background: $risk-high; }
    &.risk-critical { background: $risk-critical; }
  }
}

// Card Info (matching role-info style)
.card-info {
  flex: 1;
  min-width: 0;
  
  h3 {
    font-size: 16px;
    font-weight: 600;
    color: var(--text);
    margin: 0 0 4px 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  
  p {
    font-size: 13px;
    color: var(--text-light);
    margin: 0;
    line-height: 1.4;
  }
}

// Risk Pill Badge
.risk-pill {
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  
  &.risk-low {
    background: rgba($risk-low, 0.15);
    color: $risk-low;
  }
  
  &.risk-moderate {
    background: rgba($risk-moderate, 0.15);
    color: darken($risk-moderate, 10%);
  }
  
  &.risk-high {
    background: rgba($risk-high, 0.15);
    color: $risk-high;
  }
  
  &.risk-critical {
    background: rgba($risk-critical, 0.15);
    color: $risk-critical;
  }
}

// Arrow Icon
.arrow-icon {
  font-size: 20px;
  color: var(--text-light);
  opacity: 0.5;
}

// Risk Score Card - special layout
.risk-card {
  flex-direction: column;
  align-items: stretch;
  padding: 20px;
  
  .card-header-inline {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 20px;
  }
}

// Score Display
.score-display {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
}

// Circular Progress
.circular-progress {
  position: relative;
  width: 140px;
  height: 140px;
  
  svg {
    width: 100%;
    height: 100%;
    transform: rotate(-90deg);
    
    circle {
      fill: none;
      stroke-width: 8;
      stroke-linecap: round;
      
      &.bg {
        stroke: var(--border, #e5e7eb);
      }
      
      &.progress {
        stroke: var(--primary, #007aff);
        transition: stroke-dasharray 0.5s ease;
      }
    }
  }
  
  // Risk level colors for progress
  &.risk-low svg circle.progress { stroke: $risk-low; }
  &.risk-moderate svg circle.progress { stroke: $risk-moderate; }
  &.risk-high svg circle.progress { stroke: $risk-high; }
  &.risk-critical svg circle.progress { stroke: $risk-critical; }
  
  .score-inner {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    
    .value {
      display: block;
      font-size: 32px;
      font-weight: 700;
      color: var(--text);
      line-height: 1;
    }
    
    .label {
      display: block;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-top: 4px;
      
      &.risk-low { color: $risk-low; }
      &.risk-moderate { color: $risk-moderate; }
      &.risk-high { color: $risk-high; }
      &.risk-critical { color: $risk-critical; }
    }
  }
}

// Score Meta Info
.score-meta {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  
  span {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 13px;
    color: var(--text-light);
    
    ion-icon {
      font-size: 16px;
    }
  }
}

// No Data State
.no-data-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 24px 0;
  gap: 8px;
  
  ion-icon {
    font-size: 32px;
    color: var(--text-light);
    opacity: 0.5;
  }
  
  p {
    font-size: 14px;
    color: var(--text-light);
    margin: 0;
  }
}

// Section Header
.section-header {
  margin: 24px 0 12px;
  width: 100%;
  
  h2 {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-light);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin: 0 0 4px 0;
  }
  
  p {
    font-size: 13px;
    color: var(--text-light);
    opacity: 0.7;
    margin: 0;
  }
}

// Factors List
.factors-list {
  display: flex;
  flex-direction: column;
  gap: 0;
  width: 100%;
  
  .factor-card {
    margin-bottom: 8px;
  }
}

// Severity Indicator
.severity-indicator {
  display: flex;
  align-items: center;
  justify-content: center;
  
  ion-icon {
    font-size: 20px;
  }
  
  &.severity-low ion-icon { color: $risk-low; }
  &.severity-moderate ion-icon { color: $risk-moderate; }
  &.severity-high ion-icon { color: $risk-high; }
}

// Doctor Card
.doctor-card, .no-doctor-card {
  cursor: pointer;
}

.doctor-avatar {
  background: rgba(52, 199, 89, 0.1);
  
  ion-icon {
    color: #34c759;
  }
}

// Action Buttons
.action-buttons {
  margin-top: 24px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  width: 100%;
}

// Continue Button (matching role-selection)
.continue-button {
  --background: var(--primary, #007aff);
  --background-hover: var(--primary-hover, #005ce6);
  --border-radius: 12px;
  --padding-top: 16px;
  --padding-bottom: 16px;
  font-weight: 600;
  font-size: 16px;
  
  &[disabled] {
    --background: var(--border, #e5e7eb);
    --color: var(--text-light);
    opacity: 0.7;
  }
}

// Secondary Button
.secondary-button {
  --border-radius: 12px;
  --padding-top: 14px;
  --padding-bottom: 14px;
  --border-width: 2px;
  --border-color: var(--border, #e5e7eb);
  --color: var(--text);
  font-weight: 600;
  font-size: 15px;
  
  &:hover {
    --border-color: var(--primary, #007aff);
  }
}

// Login Link (matching role-selection)
.login-link {
  text-align: center;
  margin-top: 24px;
  
  p {
    font-size: 14px;
    color: var(--text-light);
    margin: 0 0 4px 0;
  }
  
  a {
    font-size: 15px;
    font-weight: 600;
    color: var(--primary, #007aff);
    text-decoration: none;
    
    &:hover {
      text-decoration: underline;
    }
  }
}

// Navigation Section
.navigation-section {
  margin-top: 24px;
  padding-top: 16px;
}

.back-link {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  font-weight: 600;
  color: var(--primary, #007aff);
  text-decoration: none;
  margin-bottom: 16px;
  
  &:hover {
    text-decoration: underline;
  }
}

// Dark Mode Adjustments
[data-theme="dark"] {
  .profile-card {
    border-color: var(--border-dark, #374151);
    
    &:hover {
      background: rgba(0, 122, 255, 0.08);
    }
  }
  
  .card-icon {
    background: rgba(0, 122, 255, 0.15);
  }
  
  .circular-progress svg circle.bg {
    stroke: var(--border-dark, #374151);
  }
}
